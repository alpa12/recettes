# ============================================================
# Exemple complet de recette (sert uniquement de référence)
# ============================================================

exemple:

  nom: Poulet Alfredo
  nom_court: poulet-alfredo
  source: Ricardo
  portions: 4
  se_congele: true
  difficulte: Facile
  cout: $
  allergenes:
    - Lait
    - Gluten

  categories:
    - Poulet
    - Rapide

  temps:
    preparation: 20
    cuisson: 30
    refrigeration: null

  preparation:
    - section: Sauce
      etapes:
        - etape: Mélanger les ingrédients.
          image_guid: null
          ingredients:
            - nom: Crème
              qte: 1
              uni: t
              rangee: Produits laitiers et oeufs
          equipements:
            - Bol

  commentaires:
    - commentaire: Excellent
      date: 2026-02-13
      auteur: Alex
      evaluation: 5
    - commentaire: À refaire
      date: 2026-02-13
      auteur: Alex
      evaluation: 4

# ============================================================
# Schéma dynamique du formulaire
# ============================================================

_schema:

  type: object
  required:
    - nom
    - nom_court
    - source
    - portions

  properties:

    nom:
      type: string
      title: Nom
      description: Nom complet de la recette

    nom_court:
      type: string
      title: Nom court
      description: Nom court pour la table des matières

    source:
      type: string
      title: Source
      description: D'où vient la recette

    portions:
      type: integer
      title: Portions
      description: Nombre de portions

    se_congele:
      type: boolean
      title: Se congèle
      description: Est-ce que la recette peut être congelée ?

    difficulte:
      type: string
      title: Difficulté
      enum: [Facile, Intermédiaire, Avancé]
      nullable: true

    cout:
      type: string
      title: Coût
      enum: ["$", "$$", "$$$"]
      nullable: true

    allergenes:
      type: array
      title: Allergènes
      items:
        type: string

    categories:
      type: array
      title: Catégories
      items:
        type: string

    temps:
      type: object
      title: Temps
      properties:
        preparation:
          type: integer
          nullable: true
        cuisson:
          type: integer
          nullable: true
        refrigeration:
          type: integer
          nullable: true

    preparation:
      type: array
      title: Préparation
      items:
        type: object
        properties:
          section:
            type: string
          etapes:
            type: array
            items:
              type: object
              properties:
                etape:
                  type: string
                image_guid:
                  type: string
                  title: Image de l'étape
                  description: Téléverse une image JPG (elle sera renommée automatiquement).
                  nullable: true
                ingredients:
                  type: array
                  items:
                    type: object
                    properties:
                      nom:
                        type: string
                      qte:
                        type: number
                      uni:
                        type: string
                      rangee:
                        type: string
                        nullable: true
                equipements:
                  type: array
                  items:
                    type: string

    commentaires:
      type: array
      items:
        type: object
        properties:
          commentaire:
            type: string
            nullable: true
          date:
            type: string
            format: date
            nullable: true
          auteur:
            type: string
            nullable: true
          evaluation:
            type: integer
            enum: [1, 2, 3, 4, 5]
            nullable: true

    image_guid:
      type: string
      title: Image de couverture
      description: Téléverse une image JPG (elle sera renommée automatiquement).
      nullable: true
